1번 슬라이드
안녕하세요. 서울시 아파트 매매가 예측을 주제로 프로젝트를 진행한, 아파트팀 데이터 전처리 및 전반부 발표자 이유리 입니다. 반갑습니다.

2번
목차를 보시면, 프로젝트 개요, 팀원의 역할, 수행절차, 전처리 및 모델링, 자체평가 순으로 발표가 진행됩니다.

3번
먼저 프로젝트 배경입니다. 서울의 아파트 매매가는 부동산 시장의 주요 지표로서, 시민과 투자자들에게 중요한 의사결정 정보를 제공합니다. 이에 따라, 저희는 주요 데이터를 활용해 예측 모델을 개발해보았습니다.

4번
저희 팀은 세명으로 구성되어있습니다. 저는 데이터를 수집하고 전처리 과정을 주도적으로 담당하였습니다.
수집 데이터에서 빨간 글씨 부분은 멘토님들의 피드백을 반영한 것으로, 원래 사용하려고했던 아파트 실거래가, 교통, 주변 인프라 정보 외에 정치데이터, 환율과 금리, 아파트 브랜드, 행정동별 상가 소득 및 소비에 대한 데이터를 추가적으로 수집하였고, 범죄율은 데이터 수집의 어려움, 날씨는 서울시 관측소가 2개 뿐이라, 데이터의 공간적 차별성이 없음을 인지하여 폐기하였습니다.

5번
다음으로 수행 절차 및 방법입니다. 기획안 발표 후 멘토님들의 피드백을 반영하여 정치 및 특이해 보이는 데이터를 추가 수집하였고, 이런 데이터 수집과 전처리 과정은 프로젝트의 기초 작업으로서 매우 중요한 부분이라고 사료됩니다.

6번
아파트 실거래가 데이터를 2013년도 1월 1일부터 2024년도 10월 말까지 수집하였습니다. 그러나 API의 한계로 인해 2019년 1월 1일부터 2023년 12월 31일까지, 총 이십오만일천구십육건의 데이터를 활용하였습니다.

7번
원데이터는 년도별로 csv파일로 존재하며, 각 년도마다 넘버가 1부터 시작했습니다. 그래서 이 데이터들을 하나로 합치면 넘버가 인덱스 기능을 잘 수행하지 못할 것을 고려하여, 넘버의 값을 년도 더하기 5자리로 길이를 고정하였습니다.
사실 처음에 저희는 서울시 구별 아파트 매매가 예측을 하려고했었습니다. 그래서 지하철역이나 버스정류장 위도 경도 데이터를 받아 구와 행정동 경계파일에 적용하여 구별, 행정동별 집계를 하였습니다. 그러자 저희 강사님께서 “구나 행정동의 평균으로 아파트 매매가를 예측하면 가격이 너무 무너질 것으로 사료된다. 아파트별 예측을 하면 좋겠다.”고 피드백을 주셨고, 어떻게 하면 아파트별로 예측할 수 있을까 고심하던 중, 위도 경도 좌표로 구와 행정동을 가려냈으니, 역으로 주소로 위도경도를 찍을 수는 없을까? 라고 생각하게되었고, 주소로 위도경도를 추출하기위해 넘버별 도로명주소를 카카오 api를 활용하여 위도경도 좌표값으로 반환하였습니다. 이 과정에서 api키를 빌려주어 도움을 주신 모든 분들 감사드립니다. 
다행히 버스정류장, 지하철역, 공원, 병원은 위도 경도가 존재하여 아파트 25만건 외에 학교를 추가적으로 위도 경도로 변환하였습니다.
또한, 계약 년월과 계약 일자를 묶어 datetime으로 변환 후 년도를 추출하여 계약년에서 건축년도를 빼서 계약 시점에서의 아파트 나이 구하였습니다.

8번
처음에는 아파트 이름을 기준으로 브랜드와 브랜드 아님 정도로 원핫코딩을 할까? 생각했었습니다. 그러자 강사님께서 브랜드의 차등을 주고 레이블인코딩을 하는게 어떻겠냐 하셨고, 어떤 기준으로 등급을 나눌지 고민하였습니다. 브랜드 아파트로 검색을 하던 중 [브랜드 스탁의 아파트 일간순위]를 알게되었고, 이를 활용하여 상위 1위부터 10위는 고급, 11위부터 순위권 안은 중급, 순위권 외에 검색결과 브랜드아파트라고 지명되는 곳은 하급, 그외는 브랜드 아님으로 설정하여 각각 4점 3점 2점 1점을 부여하여 레이블 인코딩 하였습니다.

9번
또한 화폐의 시간가치를 보상하기위해 소비자 총물가지수를 활용하여 2023년을 기준으로 아파트 매매가가되는 화폐의 현재 가치화를 하였습니다. 그로 인해 원래 가격이었던 주황색 선이 시간의 보상을 받아 초록색으로 금액이 상향조정됨을 목격하게 되었습니다.

10번
구 경계파일에 공원, 병원, 학교, 버스정류장 19년부터 23년까지 연도별 지하철역의 수를 시각화 한 것입니다. 
아파트를 기준으로 매매가를 예측하기위해서 위도 경도로 변환한 모든 아파트를 기준으로 가장 가까운 버스정류장, 학교, 병원, 공원 연도별 지하철역과의 거리를 계산하였습니다. 뿐만 아니라 0에서 500미터, 500미터에서 1키로미터, 1키로미터에서 1.5키로미터 3개 구간으로 나눠 각 구간안에 몇개씩 있는지 집계하여 각구간마다 10점, 5점, 1점의 가중치를 부여하여 점수를 계산했습니다. 
이렇게 구간을 나눈 이유는 도보로 약 5분거리, 걸을만 하다 싶은 정도,  도보로 약 10분거리, 걷긴하지만 약간 멀다 싶은 정도, 도보로 약 15분 이상인 거리,  걷자니 멀고 버스타자니 가깝다고 느낄 만한 정도라고 사료되었기 때문입니다.
이와 더불어 아파트의 위도 경도 값을 활용하여 서울시 구 경계데이터, 행정동 경계데이터, 법정동 경계데이터를 활용하여 동별 직전 1, 3, 6개월의 거래 건수를 집계하였습니다.
저희가 흔히 쓰는 주소는 법정동으로 서울시에 467개가 존재하며 행정동은 426개가 존재하는데, 법정동과 행정동은 다대다 관계로 ‘무엇이 무엇의 하위체계다’라고 설명할 수 없기때문에 일단 전부 매핑을 하고 추후 필요 데이터에따라 행정동 값을 사용할지 법정동 값을 사용할지 선택하기로 했습니다.
또한, 이 과정에서 구와 동의 경계에 있는 장소들이 미스 매치될 것을 우려하여 구별 행정동, 법정동 목록을 활용하여 “용산구 효창동이 올바르지만, 마포구 효창동＂이라고 나오거나, 관악구 보라매동이 바르지만, 관악구_신대방2동이라고 나오는 곳은 수정하였습니다.
뿐만 아니라, 이러한 작업은 행정동별 인구밀도 데이터와 행정동별 상가기준 소득,소비 데이터를 적용함에도 무리가 없었습니다.

11번
또한 멘토님들의 피드백, ‘정치데이터와 뭔가 생뚱맞은 것’을 반영하기위해서 어떻게 할지 고민하였습니다. 한국에 존재하는 모든 당을 원핫코딩하기엔 무리가 있어, 한국의 대통령이 진보성향인지 보수 성향인지, 총선결과 다수당이 진보성향인지 보수성향인지, 미국의 대통령, 미국 상원 다수당, 미국 하원 다수당이 진보성향인지 보수성향인지 재임기간에 따라 날짜별로 원핫을 하였습니다. 그리고 저희의 조사기간 2019년에서 2023년까지 한국의 총선결과 다수당이 쭉 진보성향이어서 차별성이 없다고 판단하여 제외하였습니다. 파이차트를 보시면, 노란색이 보수성향, 초록색이 진보성향으로, 재임기간을 기준으로 조사기간 얼마의 비율을 차지하고 있는 지 시각화 한 것입니다. 그리고 오른쪽의 그래프는 한미 보수, 진보 대통령의 집권기간, 미국상하원 보수, 진보다수당의 집권기간을 시각화 한 것입니다. 
아래에 보시면 일자별 미국달러, 중국위안화, 일본엔화의 환율을 시각화한 자료와 한국은행 일자별 기준금리를 시각화한 자료입니다.
환율과 금리의 경우 금융기관이 운영되지 않는날에 대하여 데이터의 공백이 발생하는 것을 목격하였고, 그러한 일자들에 대해서는 전날혹은 전전날 최대 10일 전까지의 값을 활용하도록하여 모든 조사기간동안 결측치의 발생을 막았습니다. 
이러한 전처리 작업을 거치면서 타겟을 제외한 특성이 되는 컬럼이 약 50개를 넘었습니다. 모든 특성이 유의미하다면 좋겠지만, 다중공선성 등의 문제가 발생할 수 있을 것으로 예상되었고, 이어지는 발표는 이에 대한 상관관계 분석부터 우병준 팀원이 맡아 발표하도록 하겠습니다. 감사합니다.
